<html>
<head>
    <meta charset="UTF-8">
    <title>二维码生成器 v1.0</title>
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <style>
        .disable {
            opacity: 0.1;
        }
    </style>
</head>
<body>

<h1>二维码生成器 v1.0</h1>
<hr>
<div>
    <textarea id="input" oninput="reloadQR()" placeholder="请输入二维码的内容" rows="5" cols="50"></textarea>
    <br>
    <div id="errorMsg" style="color: red"></div>
    <br>
    <div id="qrCode"></div>
</div>

<script src="/web_lib/qrcode/qrcode.min.js"></script>
<script type="text/javascript">
    var $errorMsg = document.getElementById("errorMsg");
    var $qrCode = document.getElementById("qrCode");
    var qrCode = qrCode = new QRCode($qrCode, "");

    function reloadQR() {
        var input = document.getElementById("input").value;
        qrCode.clear(); // 清除二维码
        try {
            qrCode.makeCode(input); // 生成另外一个二维码
            $errorMsg.innerText = "";
            $qrCode.className = "";
        } catch (e) {
            qrCode.makeCode("");
            $errorMsg.innerText = e.message;
            $qrCode.className = "disable";
        }
    }
</script>

</body>
</html>